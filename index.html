<!DOCTYPE html><html ng-app="demo"><head><meta charset="utf-8"><base href="/"><title>ng-fire-alarm</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta property="og:type" content="website"><meta property="og:url" content="http://ng-fire-alarm.tomchentw.com"><meta property="og:title" content="Firebase binding use $q in AngularJS"><meta property="og:description" content="Firebase and AngularJS two-way binding that use the new notify API from $q"><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><link rel="stylesheet" href="/application.css"><script type="text/javascript" defer src="/application.js"></script></head><body><header class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" ng-click="isCollapse = !isCollapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="https://github.com/tomchentw/ng-fire-alarm" target="_blank" class="navbar-brand">ng-fire-alarm</a></div><nav collapse="!isCollapse" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="#" ng-hide="_" ng-click="auth.login('facebook')">Facebook Login</a><a href="#" ng-show="_" ng-click="auth.logout()" class="ng-hide"><img id="avatar" ng-src="https://graph.facebook.com/{{ _.id }}/picture"><span ng-bind="_.displayName"></span></a></li></ul></nav></div></header><div role="main" class="container-fluid"><header><div class="page-header"><h1>ng-fire-alarm<br><small>Firebase and AngularJS two-way binding that use the new notify API from $q</small></h1></div></header><section id="chats_rooms"><div class="row"><div class="col-xs-12 col-sm-8 col-md-6"><div ng-controller="RoomsListCtrl as roomsList" class="row"><div class="col-xs-12 col-sm-6"><form role="form" novalidate name="roomForm" ng-submit="roomsAlarm.$push(newRoom).then(roomsList.resetRoom)"><h3>Create a new Room</h3><div class="form-group"><label for="newRoomTitle">Room title</label><input id="newRoomTitle" type="text" name="title" ng-model="newRoom.title" required class="form-control"><span ng-show="roomForm.title.$error.required" class="help-block">Please fill in a new room title</span></div><button type="submit" class="btn btn-primary">Create</button></form></div><div class="col-xs-12 col-sm-6"><div class="btn-group"><button ng-repeat="order in roomsList.orders" ng-class="{'active': roomsList.isActiveOrder(order)}" ng-click="roomsList.activateOrder(order)" ng-bind="order" class="btn btn-default"></button></div><h3>orderBy : <span ng-bind="roomsList.currentOrdering()"></span></h3><ul class="nav nav-pills nav-stacked"><li ng-repeat="room in rooms | orderBy:order:reversed" ng-class="{'active': roomsList.isActiveRoom(room)}"><a ng-click="roomsList.activateRoom(room)" ng-bind="room.title"></a></li></ul></div></div></div><div class="col-xs-12 col-sm-4 col-md-6"><div id="chats" ng-controller="ChatsListCtrl as chatsList"><h3>Room name : <span ng-bind="room.title"></span></h3><div ng-repeat="chat in chats" ng-controller="ChatCtrl" class="media"><a ng-href="{{ author.link }}" target="_blank" class="pull-left"><img ng-src="https://graph.facebook.com/{{ author.$name }}/picture?type=normal" class="media-object"></a><div class="media-body"><div class="media-heading"><strong ng-bind="author.displayName"></strong><a href="#" ng-if="chat.authorId == _.id" ng-click="chatsAlarm.$ref().child(chat.$name).remove()" class="pull-right">x</a></div><p ng-bind-html="chat.message | linky:'_blank'"></p></div></div><div class="media"><a href="" class="pull-left"><img ng-src="https://graph.facebook.com/{{ _.id }}/picture?type=normal" class="media-object"></a><div class="media-body"><form role="form" novalidate name="chatForm" ng-submit="chatsAlarm.$push(newChat).then(chatsList.resetChat)"><input type="hidden" name="authorId" ng-model="newChat.authorId" required ng-bind="newChat.authorId = _.id" class="ng-hide"><div class="form-group"><input type="text" name="message" ng-model="newChat.message" required placeholder="message..." class="form-control"><span ng-hide="room" class="help-block">Please select a Room</span><span ng-show="chatForm.authorId.$error.required" class="help-block">Please login to Chat</span><span ng-show="chatForm.message.$error.required" class="help-block">Please add your message</span></div><button type="submit" class="btn pull-right">Send as <span ng-bind="_.displayName"></span></button></form></div></div></div></div></div></section><section ng-non-bindable><div class="row"><div class="col-xs-12 col-md-6"><pre><code class="language-html">
<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">ng-controller</span>=<span class="hljs-value">"RoomsListCtrl as roomsList"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"row"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"col-xs-12 col-sm-6"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">role</span>=<span class="hljs-value">"form"</span> <span class="hljs-attribute">novalidate</span>=<span class="hljs-value">"novalidate"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"roomForm"</span> <span class="hljs-attribute">ng-submit</span>=<span class="hljs-value">"roomsAlarm.$push(newRoom).then(roomsList.resetRoom)"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">h3</span>&gt;</span>Create a new Room<span class="hljs-tag">&lt;/<span class="hljs-title">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">"newRoomTitle"</span>&gt;</span>Room title<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"newRoomTitle"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"title"</span> <span class="hljs-attribute">ng-model</span>=<span class="hljs-value">"newRoom.title"</span> <span class="hljs-attribute">required</span>=<span class="hljs-value">"required"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"form-control"</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">ng-show</span>=<span class="hljs-value">"roomForm.title.$error.required"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"help-block"</span>&gt;</span>Please fill in a new room title<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"submit"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"btn btn-primary"</span>&gt;</span>Create<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"col-xs-12 col-sm-6"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"btn-group"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">ng-repeat</span>=<span class="hljs-value">"order in roomsList.orders"</span> <span class="hljs-attribute">ng-class</span>=<span class="hljs-value">"{'active': roomsList.isActiveOrder(order)}"</span> <span class="hljs-attribute">ng-click</span>=<span class="hljs-value">"roomsList.activateOrder(order)"</span> <span class="hljs-attribute">ng-bind</span>=<span class="hljs-value">"order"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"btn btn-default"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">h3</span>&gt;</span>orderBy : <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">ng-bind</span>=<span class="hljs-value">"roomsList.currentOrdering()"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ul</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"nav nav-pills nav-stacked"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">ng-repeat</span>=<span class="hljs-value">"room in rooms | orderBy:order:reversed"</span> <span class="hljs-attribute">ng-class</span>=<span class="hljs-value">"{'active': roomsList.isActiveRoom(room)}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">ng-click</span>=<span class="hljs-value">"roomsList.activateRoom(room)"</span> <span class="hljs-attribute">ng-bind</span>=<span class="hljs-value">"room.title"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span></code></pre><pre><code class="language-html">
<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"chats"</span> <span class="hljs-attribute">ng-controller</span>=<span class="hljs-value">"ChatsListCtrl as chatsList"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">h3</span>&gt;</span>Room name : <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">ng-bind</span>=<span class="hljs-value">"room.title"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">h3</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">ng-repeat</span>=<span class="hljs-value">"chat in chats"</span> <span class="hljs-attribute">ng-controller</span>=<span class="hljs-value">"ChatCtrl"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"media"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">ng-href</span>=<span class="hljs-value">"{{ author.link }}"</span> <span class="hljs-attribute">target</span>=<span class="hljs-value">"_blank"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"pull-left"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">ng-src</span>=<span class="hljs-value">"https://graph.facebook.com/{{ author.$name }}/picture?type=normal"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"media-object"</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"media-body"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"media-heading"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">strong</span> <span class="hljs-attribute">ng-bind</span>=<span class="hljs-value">"author.displayName"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">strong</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span> <span class="hljs-attribute">ng-if</span>=<span class="hljs-value">"chat.authorId == _.id"</span> <span class="hljs-attribute">ng-click</span>=<span class="hljs-value">"chatsAlarm.$ref().child(chat.$name).remove()"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"pull-right"</span>&gt;</span>x<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">p</span> <span class="hljs-attribute">ng-bind-html</span>=<span class="hljs-value">"chat.message | linky:'_blank'"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"media"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"pull-left"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">ng-src</span>=<span class="hljs-value">"https://graph.facebook.com/{{ _.id }}/picture?type=normal"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"media-object"</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"media-body"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">role</span>=<span class="hljs-value">"form"</span> <span class="hljs-attribute">novalidate</span>=<span class="hljs-value">"novalidate"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"chatForm"</span> <span class="hljs-attribute">ng-submit</span>=<span class="hljs-value">"chatsAlarm.$push(newChat).then(chatsList.resetChat)"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"hidden"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"authorId"</span> <span class="hljs-attribute">ng-model</span>=<span class="hljs-value">"newChat.authorId"</span> <span class="hljs-attribute">required</span>=<span class="hljs-value">"required"</span> <span class="hljs-attribute">ng-bind</span>=<span class="hljs-value">"newChat.authorId = _.id"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"ng-hide"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"form-group"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"message"</span> <span class="hljs-attribute">ng-model</span>=<span class="hljs-value">"newChat.message"</span> <span class="hljs-attribute">required</span>=<span class="hljs-value">"required"</span> <span class="hljs-attribute">placeholder</span>=<span class="hljs-value">"message..."</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"form-control"</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">ng-hide</span>=<span class="hljs-value">"room"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"help-block"</span>&gt;</span>Please select a Room<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">ng-show</span>=<span class="hljs-value">"chatForm.authorId.$error.required"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"help-block"</span>&gt;</span>Please login to Chat<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">ng-show</span>=<span class="hljs-value">"chatForm.message.$error.required"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"help-block"</span>&gt;</span>Please add your message<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"submit"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"btn pull-right"</span>&gt;</span>Send as <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">ng-bind</span>=<span class="hljs-value">"_.displayName"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span></code></pre></div><div class="col-xs-12 col-md-6"><pre><code class="language-javascript">angular.module(<span class="hljs-string">'demo'</span>).controller(<span class="hljs-string">'RoomsListCtrl'</span>, (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
  <span class="hljs-keyword">var</span> prototype = constructor.prototype;
  prototype.resetRoom = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$scope.newRoom = <span class="hljs-keyword">void</span> <span class="hljs-number">8</span>;
  };
  prototype.orders = [<span class="hljs-string">'$index'</span>, <span class="hljs-string">'$name'</span>, <span class="hljs-string">'title'</span>];
  prototype.isActiveOrder = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(order)</span>{</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$scope.order === order;
  };
  prototype.activateOrder = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(order)</span>{</span>
    <span class="hljs-keyword">this</span>.$scope.order = order;
    <span class="hljs-keyword">this</span>.$scope.reversed = !<span class="hljs-keyword">this</span>.$scope.reversed;
  };
  prototype.currentOrdering = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    <span class="hljs-keyword">var</span> ref$, reversed, order;
    ref$ = <span class="hljs-keyword">this</span>.$scope, reversed = ref$.reversed, order = ref$.order;
    <span class="hljs-keyword">return</span> (reversed ? <span class="hljs-string">'-'</span> : <span class="hljs-string">''</span>) + <span class="hljs-string">""</span> + order;
  };
  prototype.isActiveRoom = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(room)</span>{</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$scope.$root.room === room;
  };
  prototype.activateRoom = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(room)</span>{</span>
    <span class="hljs-keyword">this</span>.$scope.$root.room = room;
  };
  constructor.$inject = [<span class="hljs-string">'$scope'</span>, <span class="hljs-string">'Room'</span>];
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span><span class="hljs-params">($scope, Room)</span>{</span>
    <span class="hljs-keyword">this</span>.$scope = $scope;
    <span class="hljs-keyword">this</span>.Room = Room;
    $scope.roomsAlarm = Room.$toAlarm({
      collection: <span class="hljs-literal">true</span>
    }).$thenNotify(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(rooms)</span>{</span>
      $scope.rooms = rooms;
    });
    $scope.order = <span class="hljs-keyword">this</span>.orders[<span class="hljs-number">0</span>];
  }
  <span class="hljs-keyword">return</span> constructor;
}())).controller(<span class="hljs-string">'ChatsListCtrl'</span>, (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
  <span class="hljs-keyword">var</span> prototype = constructor.prototype;
  prototype.resetChat = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    <span class="hljs-keyword">this</span>.$scope.newChat = <span class="hljs-keyword">void</span> <span class="hljs-number">8</span>;
  };
  prototype.onRoomChanged = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(room)</span>{</span>
    <span class="hljs-keyword">var</span> ref$;
    ref$ = <span class="hljs-keyword">this</span>.$scope;
    ref$.chats = [];
    ref$.chatsAlarm = <span class="hljs-keyword">this</span>.Room.child(room.$name).child(<span class="hljs-string">'chats'</span>).$toAlarm({
      collection: <span class="hljs-literal">true</span>
    }).$thenNotify(<span class="hljs-keyword">this</span>.onChatsChanged);
  };
  prototype.onChatsChanged = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(chats)</span>{</span>
    <span class="hljs-keyword">this</span>.$scope.chats = chats;
  };
  constructor.$inject = [<span class="hljs-string">'$scope'</span>, <span class="hljs-string">'Room'</span>];
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span><span class="hljs-params">($scope, Room)</span>{</span>
    <span class="hljs-keyword">this</span>.$scope = $scope;
    <span class="hljs-keyword">this</span>.Room = Room;
    <span class="hljs-keyword">this</span>.onRoomChanged = angular.bind(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.onRoomChanged);
    <span class="hljs-keyword">this</span>.onChatsChanged = angular.bind(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.onChatsChanged);
    $scope.$watch(<span class="hljs-string">'room'</span>, <span class="hljs-keyword">this</span>.onRoomChanged);
  }
  <span class="hljs-keyword">return</span> constructor;
}())).controller(<span class="hljs-string">'ChatCtrl'</span>, (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
  <span class="hljs-keyword">var</span> prototype = constructor.prototype;
  prototype.onAuthorChanged = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(author)</span>{</span>
    <span class="hljs-keyword">this</span>.$scope.author = author;
  };
  constructor.$inject = [<span class="hljs-string">'$scope'</span>, <span class="hljs-string">'User'</span>];
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span><span class="hljs-params">($scope, User)</span>{</span>
    <span class="hljs-keyword">this</span>.$scope = $scope;
    <span class="hljs-keyword">this</span>.User = User;
    <span class="hljs-keyword">this</span>.onAuthorChanged = angular.bind(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.onAuthorChanged);
    User.child($scope.chat.authorId).$toAlarm().$thenNotify(<span class="hljs-keyword">this</span>.onAuthorChanged);
  }
  <span class="hljs-keyword">return</span> constructor;
}()));</code></pre></div></div></section></div><footer><div class="container"><div class="container"></div><p>This project is created by <a href="https://github.com/tomchentw" target="_blank">@tomchentw</a> under <a href="http://tomchentw.mit-license.org" target="_blank">MIT License</a></p><ul class="list-inline"><li>Build with</li><li><a href="http://getbootstrap.com" target="_blank">#Bootstrap</a></li><li><a href="http://angularjs.org" target="_blank">#AngularJS</a></li><li><a href="https://www.firebase.com/" target="_blank">#Firebase</a></li><li><a href="https://github.com/bower/bower" target="_blank">#Bower</a></li><li><a href="http://gulpjs.com" target="_blank">#gulpjs</a></li></ul></div></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-41104589-6', 'tomchentw.com');
ga('send', 'pageview');</script></body></html>